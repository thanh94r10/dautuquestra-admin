!function(){function t(t,e,n){function r(t,e,n,r){}function a(){document.body.scrollTop=document.documentElement.scrollTop=0}t.$on("$stateChangeStart",r),t.$on("$stateChangeSuccess",a),t.$on("$viewContentLoaded",function(){}),t.$on("$locationChangeSuccess",function(){t.actualLocation=e.path()}),t.$watch(function(){return e.path()},function(e,r){t.actualLocation===e&&n.location.reload()}),CKEDITOR.editorConfig=function(t){t.extraPlugins="imageuploader"}}angular.module("app",["ui.router","ngStorage","ui.bootstrap","ngSanitize","angular-loading-bar"]).run(t),t.$inject=["$rootScope","$location","$window"]}(),function(){"use strict";function t(){var t={restrict:"EA",templateUrl:"app/share/directive/pro-table/pro-header/pro-header.html",scope:{proHeader:"="},controller:e,controllerAs:"vm"};return t}function e(t){function e(){t.$watch("proHeader",function(t){a=t}),angular.forEach(r.titleList,function(){r.ascentFlag.push(0)})}function n(t){for(var e=0;e<r.ascentFlag.length;e++)e!==t&&(r.ascentFlag[e]=0);0===r.ascentFlag[t]||1===r.ascentFlag[t]?(r.ascentFlag[t]=-1,r.sortAction(r.titleList[t],"_DESC")):(r.ascentFlag[t]=1,r.sortAction(r.titleList[t],""))}var r=this,a=t.proHeader;r.ascentFlag=[],r.checkSortType=n,r.sortAction=a.sorting,r.titleList=a.titleList,r.actionHeader=a.action,r.translateTitleList=a.translateTitleList,r.headerWidthList=a.headerWidthList,e()}angular.module("app").directive("proHeader",t),e.$inject=["$scope"]}(),function(){"use strict";function t(){var t={restrict:"EA",templateUrl:"javascripts/directive/pro-table/pro-pagination/pagination.html",scope:{proPagination:"="},controller:e,controllerAs:"vm"};return t}function e(t){function e(){t.$watch("proPagination",function(t){s.proPagination=t,s.totalPage=t.totalPage,s.currentPage=t.page},!0),n()}function n(){for(var t=0;t<s.totalPage;t++)s.btnPages.push(t+1),s.activeItem.push("");s.activeItem[0]="active"}function r(){0!==s.inputPage.length&&s.inputPage>0&&s.inputPage<=s.totalPage&&(s.currentPage=s.inputPage-1,s.proPagination.paging(s.proPagination.sort,s.currentPage,s.proPagination.amount),u(s.currentPage))}function a(){s.currentPage>0&&(s.currentPage=s.currentPage-1,s.inputPage=s.currentPage+1,u(s.currentPage),s.proPagination.paging(s.proPagination.sort,s.currentPage,s.proPagination.amount))}function o(){s.currentPage<s.proPagination.totalPage-1&&(s.currentPage=s.currentPage+1,s.inputPage=s.currentPage+1,u(s.currentPage),s.proPagination.paging(s.proPagination.sort,s.currentPage,s.proPagination.amount))}function i(t){u(t),s.currentPage=t,s.inputPage=t+1,s.proPagination.paging(s.proPagination.sort,s.currentPage,s.proPagination.amount)}function u(t){s.activeItem[t]="active";for(var e=0;e<s.activeItem.length;e++)e!==t&&(s.activeItem[e]="")}function c(t){s.proPagination.amount=t,s.currentPage=0,s.inputPage=1,u(s.currentPage),s.proPagination.paging(s.proPagination.sort,s.currentPage,s.proPagination.amount)}t._=_;var s=this;s.proPagination=t.proPagination,s.amountRecordArray=s.proPagination.amountRecordArray,s.amountRecord=s.amountRecordArray[0],s.leftPageFunction=a,s.inputPageChange=r,s.rightPageFunction=o,s.currentPage=s.proPagination.page,s.totalPage=s.proPagination.totalPage,s.inputPage=s.proPagination.page+1,s.setPage=i,s.activeItem=[],s.btnPages=[],s.changeAmount=c,e()}angular.module("app").directive("proPagination",t),e.$inject=["$scope"]}(),function(){"use strict";function t(){var t={restrict:"EA",templateUrl:"app/share/directive/pro-table/pro-body/pro-body.html",scope:{proBody:"="},controller:e,controllerAs:"vm"};return t}function e(t,e){function n(){t.$watch("proBody",function(t){a=t,angular.isNumber(a.amountPerPage)&&(r.amount=a.amountPerPage),angular.isNumber(a.currentPage)&&(r.currentPage=a.currentPage),angular.forEach(a.contentList,function(t){angular.forEach(a.titleList,function(n){angular.isNumber(t[n])&&(t[n]=e("currency")(t[n],"",0))})}),r.contentList=a.contentList,r.titleList=a.titleList,r.actionList=a.actionList,r.arrayChoose=a.arrayChoose,r.message=a.message,void 0!==r.actionList&&r.actionList.forEach(function(t){r.methodList.push(t.action)},this),r.actionForRow=a.actionForRow},!0)}var r=this,a=t.proBody;r.contentList=a.contentList,r.titleList=a.titleList,r.sorting=a.sorting,r.methodList=[],r.actionList=a.actionList,r.actionForRow=a.actionForRow,r.message=a.message,r.amount=10,r.currentPage=0,r.arrayChoose=[],r.isNumber=[],n()}angular.module("app").directive("proBody",t),e.$inject=["$scope","$filter"]}(),function(){function t(t,e,n,r,a,o){function i(){l(),$(".js-example-basic-single").select2(),d.header={titleList:["image","title","TimePost","AdminInfo"],sorting:u,translateTitleList:["Hình ảnh","Tiêu đề tin","Thời gian đăng","Người đăng"],sortList:[!1,!0,!0,!1],ascentFlag:[0,1,1,0],checkSortType:f},d.body={contentList:[]},d.pagination={page:"",amount:"",totalPage:"",amountRecordArray:[10,20,30,40],paging:c}}function u(t,e){d.header.sort=t+e,l(d.cateId,d.header.sort,d.pagination.page,d.pagination.amount)}function c(t,e,n){l(d.cateId,t,e,n)}function s(){l(d.cateId,d.header.sort,d.pagination.page,d.pagination.amount)}function l(t,e,n,r){function o(t){200===t.status&&(d.body.contentList=t.data.Data,d.totalPage=t.data.TotalPage,d.page=t.data.Page,d.pagination.amount=t.data.Amount,d.pagination.totalPage=t.data.TotalPage,d.pagination.page=t.data.Page)}function i(t){console.log(t)}a.getAllPosts(d.cateId,e,n,r).then(o,i)}function f(t){if(d.header.sortList[t]){for(var e=0;e<d.header.ascentFlag.length;e++)e!==t&&(d.header.ascentFlag[e]=0);0===d.header.ascentFlag[t]||1===d.header.ascentFlag[t]?(d.header.ascentFlag[t]=-1,d.header.sorting(d.header.titleList[t],"_DESC")):(d.header.ascentFlag[t]=1,d.header.sorting(d.header.titleList[t],""))}}function p(e){t.go("start.update-post",{Id:e})}function g(){function t(t){200===t.status&&(d.listCates=t.data)}function e(t){}o.GetCategories().then(t,e)}var d=this;d.sorting=u,d.paging=c,d.totalPage="",d.amountRecordArray=[10,20,30,40],d.amountRecord=10,d.amount="",d.page="",d.cateId="0",d.viewDetail=p,d.getListCategories=g,d.listCates=[],d.changeCate=s,g(),i(),d.deletePost=function(t){swal({title:"Xác nhận xóa?",text:"Khi xóa bạn sẽ không thể khôi phục tin này!",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Vâng, xóa nó!",cancelButtonText:"Không, hủy xóa!",closeOnConfirm:!1,closeOnCancel:!1},function(e){e?a.deletePost(t).then(function(t){200===t.status&&(l(d.cateId,d.header.sort,d.pagination.page,d.pagination.amount),swal("Deleted!","Bài đăng đã xóa thành công!","success"))}):swal("Đã hủy","Tin của bạn được giữ lại :)","error")})}}t.$inject=["$state","$scope","advertisementService","$localStorage","postService","categoryService"],angular.module("app").controller("PostManagerController",t),t.$injector=["$state","$scope","advertisementService","$localStorage","postService","categoryService"]}(),function(){function t(t){t.state("start.post-manager",{url:"/post-manager",templateUrl:"javascripts/controller/post-manager/post-manager.html",authenticate:!0,controller:"PostManagerController",controllerAs:"vm"})}angular.module("app").config(t),t.$inject=["$stateProvider"]}(),function(){"use strict";function t(t,e,n){function r(){void 0===t.role&&n(function(){e.go("login")})}function a(){"Student"===t.role&&n(function(){e.go("start.no-permission")})}var o={checkIsUser:r,checkIsAdmin:a};return o}angular.module("app").factory("userRoleService",t),t.$inject=["$localStorage","$state","$timeout"]}(),function(){"use strict";function t(t){function e(e){function n(t){return t}function r(t){return t}return t.post("api/RateSellers/CreateRateSeller",e).then(n,r)}var n={createRatingSeller:e};return n}angular.module("app").factory("ratingService",t),t.$inject=["$http"]}(),function(){"use strict";function t(t,e){function n(){}function r(e){function n(t){return t}function r(t){return t}return t.post("http://localhost:17453/api/Users/Create",e).then(n,r)}function a(e){function n(t){return t}function r(t){return t}return t.post("http://localhost:17453/api/Users/MakeRequest",e).then(n,r)}function o(n,r,a,o){function i(t){return angular.forEach(t.data.Data,function(t){t.Avatar=null==t.Avatar?"style/icon/user.jpg":e.BASE_URL+t.Avatar.substr(1)}),t}function u(t){return t}return void 0===o&&(o=""),t.get("api/Customers/Get?sort="+n+"&page="+r+"&amount="+a+"&searchText="+o).then(i,u)}var i={getIndex:n,registerUser:r,uploadRequest:a,getAllCustomer:o};return i}angular.module("app").factory("userService",t),t.$inject=["$http","CONSTANT"]}(),function(){"use strict";function t(t){function e(){}function n(e){function n(t){return t}function r(t){return t}return t.get("api/Request/GetAllRequest").then(n,r)}function r(e){function n(t){return t}function r(t){return t}return t.post("api/Users/MakeRequest",e).then(n,r)}function a(e){function n(t){return t}function r(t){return t}return t.get("api/Users/GetListAdvMatchRequest?requsetId="+e).then(n,r)}function o(e){function n(t){return t}function r(t){return t}return t.get("api/Request/GetRequestOfUser?idUser="+e).then(n,r)}function i(e){function n(t){return t}function r(t){return t}return t.put("api/Request/CancelRequest?requestId="+e).then(n,r)}function u(){function e(t){return t}function n(t){return t}return t.get("api/Request/GetRequestApprove").then(e,n)}function c(e){function n(t){return t}function r(t){return t}return t.put("api/Request/Approve?requestId="+e).then(n,r)}var s={getIndex:e,GetAllRequest:n,uploadRequest:r,getListAdvMatchRequest:a,GetRequestUser:o,CancelReq:i,GetRequestApprove:u,ApproveRequest:c};return s}angular.module("app").factory("requestService",t),t.$inject=["$http"]}(),function(){"use strict";function t(t){function e(e,n,r,a,o){function i(t){return angular.forEach(t.data.Data,function(t){null===t.CustomerSell.avatar?t.CustomerSell.avatar="style/icon/user.jpg":t.CustomerSell.avatar="http://localhost:17453"+t.CustomerSell.avatar.substr(1),angular.forEach(t.Images,function(t){t.Path="http://localhost:17453"+t.Path.substr(1)})}),t}function u(t){return t}return void 0===n&&(n=2),t.get("api/itemsells/GetItemSellOfCate?cateId="+e+"&type="+n+"&sort="+r+"&page="+a+"&amount="+o).then(i,u)}function n(e,n,r,a){function o(t){return angular.forEach(t.data.Data,function(t){null===t.CustomerSell.avatar?t.CustomerSell.avatar="style/icon/user.jpg":t.CustomerSell.avatar="http://localhost:17453"+t.CustomerSell.avatar.substr(1),angular.forEach(t.Images,function(t){t.Path="http://localhost:17453"+t.Path.substr(1)})}),t}function i(t){return t}return void 0===e&&(e=2),t.get("api/itemsells/getTypeItems?type="+e+"&sort="+n+"&page="+r+"&amount="+a).then(o,i)}function r(e,n,r,a,o){function i(t){return angular.forEach(t.data.Data,function(t){null===t.CustomerSell.avatar?t.CustomerSell.avatar="style/icon/user.jpg":t.CustomerSell.avatar="http://localhost:17453"+t.CustomerSell.avatar.substr(1),angular.forEach(t.Images,function(t){t.Path="http://localhost:17453"+t.Path.substr(1)})}),t}function u(t){return t}return void 0===n&&(n=2),t.get("api/itemsells/getUserItems?IdUser="+e+"&type="+n+"&sort="+r+"&page="+a+"&amount="+o).then(i,u)}function a(e,n,r,a,o){function i(t){return angular.forEach(t.data.Data,function(t){null===t.CustomerSell.avatar?t.CustomerSell.avatar="style/icon/user.jpg":t.CustomerSell.avatar="http://localhost:17453"+t.CustomerSell.avatar.substr(1),angular.forEach(t.Images,function(t){t.Path="http://localhost:17453"+t.Path.substr(1)})}),t}function u(t){return t}return void 0===n&&(n=2),console.log(r+" "+a+" "+o),t.get("api/itemsells/getUserItemsSell?IdUser="+e+"&type="+n+"&sort="+r+"&page="+a+"&amount="+o).then(i,u)}function o(e,n,r){function a(t){return angular.forEach(t.data.Data,function(t){null===t.CustomerSell.avatar?t.CustomerSell.avatar="style/icon/user.jpg":t.CustomerSell.avatar="http://localhost:17453"+t.CustomerSell.avatar.substr(1),angular.forEach(t.Images,function(t){t.Path="http://localhost:17453"+t.Path.substr(1)})}),t}function o(t){return t}return t.get("api/customers/GetFavoriteItemsUser?userId="+e+"&page="+n+"&amount="+r).then(a,o)}function i(e,n,r,a,o){function i(t){return angular.forEach(t.data.Data,function(t){null===t.CustomerSell.avatar?t.CustomerSell.avatar="style/icon/user.jpg":t.CustomerSell.avatar="http://localhost:17453"+t.CustomerSell.avatar.substr(1),angular.forEach(t.Images,function(t){t.Path="http://localhost:17453"+t.Path.substr(1)})}),t}function u(t){return t}return void 0===n&&(n=2),t.get("api/itemsells/getBrandItems?brand="+e+"&type="+n+"&sort="+r+"&page="+a+"&amount="+o).then(i,u)}function u(e){function n(t){return angular.forEach(t.data,function(t){null===t.CustomerSell.avatar?t.CustomerSell.avatar="style/icon/user.jpg":t.CustomerSell.avatar="http://localhost:17453"+t.CustomerSell.avatar.substr(1),angular.forEach(t.Images,function(t){t.Path="http://localhost:17453"+t.Path.substr(1)})}),t}function r(t){return t}return t.get("api/itemsells/getSuggestItems?itemId="+e).then(n,r)}function c(e){function n(t){switch(t.data.state){case 1:t.data.state="Mới 100%";break;case 2:t.data.state="Mới 80% - 90%";break;case 3:t.data.state="Mới dưới 80%";break;case 4:t.data.state="Hư hỏng"}return angular.forEach(t.data.Images,function(t){t.Path="http://localhost:17453"+t.Path.substr(1)}),t.data.nextBid=t.data.nextBid.toFixed(2),t}function r(t){return t}return t.get("api/itemsells/GetItemSellById?id="+e).then(n,r)}function s(e){function n(t){return t}function r(t){return console.log(t),t}return t.post("api/itemsells/CreateItemSell",e).then(n,r)}function l(e){function n(t){return t}function r(t){return t}return t.post("api/customers/AddFavor",e).then(n,r)}function f(e,n){function r(t){return t}function a(t){return t}return t.post("api/customers/RemoveFavor?userId="+e+"&itemId="+n).then(r,a)}function p(e){function n(t){return t}function r(t){return console.log(t),t}return t.put("api/itemsells/updateExpriedAd?id="+e).then(n,r)}function g(e){function n(t){return t}function r(t){return t}return t.put("api/itemsells/UpdateItemSell",e).then(n,r)}function d(e,n,r,a,o){function i(t){return angular.forEach(t.data.Data,function(t){null===t.CustomerSell.avatar?t.CustomerSell.avatar="style/icon/user.jpg":t.CustomerSell.avatar="http://localhost:17453"+t.CustomerSell.avatar.substr(1),angular.forEach(t.Images,function(t){t.Path="http://localhost:17453"+t.Path.substr(1)})}),t}function u(t){return t}return void 0===n&&(n=-1),t.get("api/itemsells/searchItems?keyword="+e+"&type="+n+"&sort="+r+"&page="+a+"&amount="+o).then(i,u)}var m={getItemOfCategory:e,getItemById:c,createItemSell:s,updateExpriedAd:p,getUserItems:r,updateItemSell:g,searchItem:d,getBrandItems:i,getUserItemsSell:a,getFavorItems:o,addLoveProduct:l,removeLoveProduct:f,listItemsByType:n,getListSuggest:u};return m}angular.module("app").factory("itemService",t),t.$inject=["$http"]}(),function(){"use strict";function t(t,e){function n(e){function n(t){return t}function r(t){return t}return t.post("api/Order/CreateOrder",e).then(n,r)}function r(e,n,r,a){function o(t){return t}function i(t){return t}return void 0===n&&(n="orderDate"),t.get("api/Order/getBuyerOrders?userId="+e+"&sort="+n+"&page="+r+"&amount="+a).then(o,i)}function a(e,n){function r(t){return t}function a(t){return t}return t.put("api/Advertisement/CancelOrder?idOrder="+e+"&idAvertisement="+n).then(r,a)}function o(n,r,a,o){function i(t){return angular.forEach(t.data.Data,function(t){t=c(t),t.image=e.BASE_URL+t.image.substr(1)}),console.log(t),t}function u(t){return t}return void 0===r&&(r="orderDate"),t.get("api/Order/getSellerOrders?userId="+n+"&sort="+r+"&page="+a+"&amount="+o).then(i,u)}function i(e,n){function r(t){return t}function a(t){return t}return t.put("api/Order/UpdateOrder?orderId="+e+"&result="+n).then(r,a)}function u(e){function n(t){return t}function r(t){return t}return t.get("api/Order/getOrderById?id="+e).then(n,r)}function c(t){var e=t;switch(t.Result){case 0:e.progress=25,e.progressTitle="Người mua chưa thanh toán";break;case 1:e.progress=50,e.progressTitle="Người mua đã thanh toán";break;case 2:e.progress=75,e.progressTitle="Đã chuyển hàng";break;case 3:e.progress=100,e.progressTitle="Người mua đã nhận hàng";break;case-1:e.progress=0,e.progressTitle="Đơn hàng bị hủy"}return e}var s={createOrder:n,getBuyerOrders:r,CancelOrder:a,getSellerOrders:o,UpdateOrder:i,getOrderById:u};return s}angular.module("app").factory("orderService",t),t.$inject=["$http","CONSTANT"]}(),function(){"use strict";function t(t,e){function n(){}function r(n,r,a,o){function i(t){return angular.forEach(t.data.Data,function(t){t.imageItem=e.BASE_URL+t.imageItem.substr(1)}),t}function u(t){return t}return void 0==r&&(r="notitime_desc"),t.get("api/Notification/GetNotiOfUser?userId="+n+"&sort="+r+"&page="+a+"&amount="+o).then(i,u)}function a(e){function n(t){return t}function r(t){return t}return t.get("api/Notification/GetAllNotification?userId="+e).then(n,r)}function o(e){function n(t){return t}function r(t){return t}return t.put("http://localhost:17453/api/Notification/UserReaded?notiId="+e).then(n,r)}function i(){function e(t){return t}function n(t){return t}return t.put("http://localhost:17453/api/Notification/ReadAll").then(e,n)}var u={getIndex:n,getListNotification:r,getAllNotification:a,UserReaded:o,ReadAll:i};return u}angular.module("app").factory("notificationService",t),t.$inject=["$http","CONSTANT"]}(),function(){"use strict";function t(t){function e(e){function n(t){return t}function r(t){return t}return t.post("api/CustomerMessages/SendMessage",e,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).then(n,r)}function n(e,n,r,a){function o(t){return t}function i(t){return t}return void 0==n&&(n="messtime_desc"),t.get("api/CustomerMessages/getUsersMessageReceiver?userId="+e+"&sort="+n+"&page="+r+"&amount="+a).then(o,i)}function r(e,n,r,a){function o(t){return t}function i(t){return t}return t.get("api/CustomerMessages/getUsersMessageSend?userId="+e+"&sort="+n+"&page="+r+"&amount="+a).then(o,i)}function a(e){function n(t){return t}function r(t){return t}return t.get("api/CustomerMessages/getMessNotis?userId="+e).then(n,r)}function o(e){function n(t){return t}function r(t){return t}return t.put("api/CustomerMessages/ReadedMesage?idMessage="+e).then(n,r)}var i={sendMessage:e,getUserMessageReceive:n,getUserMessageSend:r,readedMess:o,getMessNotis:a};return i}angular.module("app").factory("messageCustomerService",t),t.$inject=["$http"]}(),function(){"use strict";function t(t){function e(){return u}function n(t){if(i(t)){if(t.file.name.indexOf(".jpg")===-1&&t.file.name.indexOf(".png")===-1&&t.file.name.indexOf(".jpeg")===-1&&t.file.name.indexOf(".gif")===-1)return!1;u.push(t)}return!0}function r(t){if(i(t)){if(t.file.name.indexOf(".pdf")===-1&&t.file.name.indexOf(".doc")===-1&&t.file.name.indexOf(".docx")===-1&&t.file.name.indexOf(".jpg")===-1&&t.file.name.indexOf(".png")===-1&&t.file.name.indexOf(".jpeg")===-1)return!1;u.push(t)}return!0}function a(){u=[]}function o(t){for(var e=0;e<u.length;e++)t.file.name===u[e].file.name&&u.splice(e,1)}function i(t){for(var e=0;e<u.length;e++)if(t.file.name===u[e].file.name)return!1;return!0}var u=[],c={getFiles:e,pushFiles:n,pushDocument:r,deleteFilesTable:o,deleteAllFilesTable:a};return c}angular.module("app").factory("fileService",t),t.$inject=["$http"]}(),function(){"use strict";function t(t,e){function n(n,r,a,o){function i(t){return angular.forEach(t.data.Data,function(t){null===t.CustomerComment.avatar?t.CustomerComment.avatar="style/icon/user.jpg":t.CustomerComment.avatar=e.BASE_URL+t.CustomerComment.avatar.substr(1),null===t.listReply?t.hasReply=!1:angular.forEach(t.listReply,function(t){null===t.CustomerReply.avatar?t.CustomerReply.avatar="style/icon/user.jpg":t.CustomerReply.avatar=e.BASE_URL+t.CustomerReply.avatar.substr(1)})}),t}function u(t){return t}return void 0==r&&(r="timeComment_desc"),t.get("api/Comment/getListComments?itemSellId="+n+"&sort="+r+"&page="+a+"&amount="+o).then(i,u)}function r(e){function n(t){return t}function r(t){return t}return t.post("api/Comment/CreateComment",e).then(n,r)}function a(e){function n(t){return t}function r(t){return t}return t.post("api/Comment/CreateReply",e).then(n,r)}function o(e){function n(t){return t}function r(t){return t}return t.put("api/Comment/UpdateComment",e).then(n,r)}function i(e){function n(t){return t}function r(t){return t}return t["delete"]("api/Comment/Delete?id="+e).then(n,r)}var u={getListComment:n,createComment:r,editComment:o,deleteComment:i,createReply:a};return u}angular.module("app").factory("commentService",t),t.$inject=["$http","CONSTANT"]}(),function(){"use strict";function t(){var t={restrict:"EA",templateUrl:"app/share/directive/pro-table/pro-table.html",scope:{proTable:"=",searchFunction:"="},controller:e,controllerAs:"vm"};return t}function e(t){function e(){n.searchShow=angular.isFunction(n.searchFunction),t.$watch("proTable",function(t){angular.isNumber(t.pagination.amount)&&(t.body.amountPerPage=t.pagination.amount),angular.isNumber(t.pagination.page)&&(t.body.currentPage=t.pagination.page),n.option=t,n.option.header=t.header,n.option.body=t.body,n.pagination=t.pagination},!0)}var n=this;n.option=t.proTable,n.searchFunction=t.searchFunction,n.searchShow=!1,e()}angular.module("app").directive("ngEnter",function(){return function(t,e,n){e.bind("keydown keypress",function(e){13===e.which&&(t.$apply(function(){t.$eval(n.ngEnter)}),e.preventDefault())})}}).directive("proTable",t),e.$inject=["$scope"]}(),function(){"use strict";function t(t){function e(e){function n(t){return t}function r(t){return t}return t.post("api/RoomChats/CreateRoomChat",e).then(n,r)}function n(e){function n(t){return t}function r(t){return t}return t.get("api/RoomChats/GetListChatRoom?idUser="+e).then(n,r)}function r(e){function n(t){return t}function r(t){return t}return t.get("api/RoomChats/GetChatRoomById?id="+e).then(n,r)}var a={createRoomChat:e,getRoomChatUser:n,getRoomChatById:r};return a}angular.module("app").factory("chatService",t),t.$inject=["$http"]}(),function(){"use strict";function t(t){function e(){}function n(){function e(t){return t}function n(t){return t}return t.get("/api/Category/GetCategories").then(e,n)}function r(e,n,r){function a(t){return t}function o(t){return t}return t.get("/api/Category/getAllCategories?sort="+e+"&page="+n+"&amount="+r).then(a,o)}function a(){function e(t){return t}function n(t){return t}return t.get("api/Category/GetGroupCategory").then(e,n)}function o(){function e(t){return t}function n(t){return t}return t.get("api/Advertisement/GetStatistical").then(e,n)}function i(e){function n(t){return t}function r(t){return t}return t.post("api/Category/Create?name="+e).then(n,r)}function u(e,n){function r(t){return t}function a(t){return t}return t.put("api/Category/UpdateCategory?id="+e+"&name="+n).then(r,a)}var c={getIndex:e,getAllCategory:r,getGroupCategory:a,GetStatistical:o,createCate:i,updateCate:u,GetCategories:n};return c}angular.module("app").factory("categoryService",t),t.$inject=["$http"]}(),function(){"use strict";function t(t){function e(e){function n(t){return t}function r(t){return t}return t.post("api/Bids/CreateBid",e).then(n,r)}var n={createBid:e};return n}angular.module("app").factory("bidService",t),t.$inject=["$http"]}(),function(){"use strict";function t(t,e,n,r,a){function o(e){function r(t){return t}function a(t){return t}return t.post("/api/Accounts/token",n(e)).then(r,a)}function i(){e.token||a(function(){r.go("login")})}function u(){e.token&&a(function(){})}var c={getToken:o,checkAuthentication:i,checkUnAuthentication:u};return c}angular.module("app").factory("authenticationService",t),t.$inject=["$http","$localStorage","$httpParamSerializerJQLike","$state","$timeout"]}(),function(){"use strict";function t(t){function e(e){function n(t){return t}function r(t){return t}return t.post("api/DetailAdv/CreateDetail",e).then(n,r)}function n(e){function n(t){return t}function r(t){return t}return t.get("api/DetailAdv/GetDetail?advertisementId="+e).then(n,r)}function r(e){function n(t){return t}function r(t){return t}return t.post("api/Advertisement/SendSMSMessage",e).then(n,r)}var a={CreateDetail:e,GetDetail:n,SendSms:r};return a}angular.module("app").factory("detailAdvService",t),t.$inject=["$http"]}(),function(){"use strict";function t(t){function e(e){function n(t){return t}function r(t){return console.log(t),t}return t.post("api/Advertisement/CreateAdvertisement",e,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).then(n,r)}function n(){function e(t){return t}function n(t){return t}return t.get("api/Advertisement/HomePage").then(e,n)}function r(e,n,r,a,o){function i(t){return t}function u(t){return t}return t.get("api/Advertisement/GetAdvertisementOfCate?cateId="+e+"&type="+n+"&sort="+r+"&page="+a+"&amount="+o).then(i,u)}function a(e){function n(t){return t}function r(t){return console.log(t),t}return t.post("api/Advertisement/CreateAdvertisement",e,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).then(n,r)}function o(e){function n(t){return t}function r(t){return console.log(t),t}return t.post("api/ItemSells/CreateItemSell",e,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).then(n,r)}function i(e){function n(t){return t}function r(t){return t}return t.get("api/Advertisement/getAdvertisementById?id="+e).then(n,r)}function u(e){function n(t){return t}function r(t){return t}return t.put("api/Advertisement/UpdateAdvertisement",e).then(n,r)}function c(e){function n(t){return t}function r(t){return t}return t.get("api/Advertisement/GetSameAdvertisementOfCate?adId="+e).then(n,r)}function s(){function e(t){return t}function n(t){return t}return t.get("api/Address/AddressDefault").then(e,n)}function l(e,n,r,a){function o(t){return t}function i(t){return t}return t.get("api/Advertisement/GetListAdOfUser?userId="+e+"&sort="+n+"&page="+r+"&amount="+a).then(o,i)}function f(e){function n(t){return t}function r(t){return t}return t.post("api/Advertisement/SearchAdvertisement",e).then(n,r)}function p(e){function n(t){return t}function r(t){return t}return t.post("api/Advertisement/SendMailOrderer",e).then(n,r)}function g(e){function n(t){return t}function r(t){return t}return t.post("api/ItemSells/SendMailForUser",e).then(n,r)}function d(e){function n(t){return t}function r(t){return t}return t.post("api/ItemSells/ShareAdvertisement",e).then(n,r)}function m(e,n,r,a){function o(t){return t}function i(t){return t}return t.get("api/Advertisement/GetAdversByAddress?city="+e+"&district="+n+"&page="+r+"&amount="+a).then(o,i)}function h(e){function n(t){return t}function r(t){return t}return t.put("api/Advertisement/Sold?advertisementId="+e).then(n,r)}function v(e,n){function r(t){return t}function a(t){return t}return t.put("api/Advertisement/CancelSaling?advertisementId="+e+"&status="+n).then(r,a)}function C(e){function n(t){return t}function r(t){return t}return t["delete"]("api/Advertisement/ShareAdvertisement",mail).then(n,r)}function S(){function e(t){return t}function n(t){return t}return t.get("api/Advertisement/GetApproveListAd").then(e,n)}function P(e,n){function r(t){return t}function a(t){return t}return t.put("api/Advertisement/Approve?advertisementId="+e+"&approve="+n).then(r,a)}function A(e){function n(t){return t}function r(t){return t}return t.get("api/Advertisement/GetListApproveByAdmin?idAdmin="+e).then(n,r)}function y(e,n){function r(t){return t}function a(t){return t}return t.get("api/Advertisement/Get?page="+e+"&amount="+n).then(r,a)}var I={createAdvertisement:e,upItemSell:o,homePage:n,getAdsOfCate:r,upAdvertisement:a,getAdvertisementById:i,getListSameAd:c,AddressDefault:s,GetListAdOfUser:l,SearchAds:f,SendMail:g,ShareMail:d,getAdsByAddress:m,SoldAd:h,CancelSale:v,DeleteAd:C,getListAdApprove:S,AppoveAd:P,GetListApproveByAdmin:A,getAllAdvertisement:y,SendMailOrderer:p,updateAd:u};return I}angular.module("app").factory("advertisementService",t),t.$inject=["$http"]}(),function(){"use strict";function t(t,e,n,r){function a(e){function n(t){return t}function r(t){return t}return t.post("api/Accounts/Create",e).then(n,r)}function o(e){function n(t){return t}function r(t){return t}return t.put("api/Accounts/UpdateProfile",e,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).then(n,r)}function i(t){if(u(t)){if(t.file.name.indexOf(".jpg")===-1&&t.file.name.indexOf(".png")===-1&&t.file.name.indexOf(".jpeg")===-1)return!1;v[0]=t}return!0}function u(t){for(var e=0;e<v.length;e++)if(t.file.name===v[e].file.name)return!1;return!0}function c(){return v}function s(){function e(t){return t}function n(t){return t}return t.get("/api/Accounts/GetProfile").then(e,n)}function l(e){function n(t){return t}function r(t){return t}return t.get("api/Accounts/GetProfileAdmin?id="+e).then(n,r)}function f(e){function n(t){return t}function r(t){return t}return t.get("api/Accounts/GetById?id="+e).then(n,r)}function p(e){function n(t){return t}function r(t){return t}return t.put("api/Accounts/ChangePassword",e).then(n,r)}function g(){function e(t){var e=[];return angular.forEach(t.data,function(t){angular.forEach(t.Roles,function(n){"Admin"===n&&e.push(t)})}),e}function n(t){return t}return t.get("api/Accounts/GetAll").then(e,n)}function d(e){function a(t){return 0!==t.data.listItems.length&&(angular.forEach(t.data.listItems,function(t){angular.forEach(t.Images,function(t){t.Path=r.BASE_URL+t.Path.substr(1)})}),angular.forEach(t.data.Followers,function(t){null==t.Avatar?t.Avatar="style/icon/user.jpg":t.Avatar=r.BASE_URL+t.Avatar.substr(1)}),t.data.listItems=n.chunk(t.data.listItems,3)),t}function o(t){return t}return t.get("api/Customers/GetCustomerProfile?customerId="+e).then(a,o)}function m(e){function n(t){return t}function r(t){return t}return t.post("api/Customers/FollowerCustomer?IdCustomer="+e).then(n,r)}function h(e){function n(t){return t}function r(t){return t}return t.post("api/Customers/UnFollowerCustomer?IdCustomer="+e).then(n,r)}var v=[],C={getProfile:s,getAccountById:f,createAccount:a,updateProfile:o,pushImage:i,getImages:c,changePassOfUser:p,getListAdmin:g,getProfileCustomer:d,followCustomer:m,unFollowCustomer:h,getProfileAdmin:l};return C}angular.module("app").factory("accountService",t),t.$inject=["$http","$state","utilService","CONSTANT"]}(),function(){"use strict";function t(){function t(t,e,n){}var n={restrict:"ACE",templateUrl:"javascripts/directive/table/table.html",scope:{},link:t,controller:e};return n}function e(){}angular.module("app").directive("ttTable",t),e.$inject=[]}(),function(){function t(t,e,n,r,a,o,i,u,c,s,l,f){function p(){CKEDITOR.replace("DescEditor",{language:"vi"}),$("#id_label_single").select2()}function g(){function t(t){200===t.status&&(h.listCates=t.data,console.log(h.listCates))}function e(t){}f.GetCategories().then(t,e)}function d(){function t(t){200===t.status&&m()}function e(t){}var n=CKEDITOR.instances.DescEditor.getData(),r={Title:h.Title,Description:$("<div/>").text(n).html(),IdPoster:h.IdPoster,IdCate:h.category,shortDesc:h.shortDesc};h.files=o.getImages();var a=new FormData;void 0!==h.files[0]?(a.append("objCreatePostModel",JSON.stringify(r)),a.append("imagePost",h.files[0].file)):a.append("objCreatePostModel",JSON.stringify(r)),u.createPost(a).then(t,e)}function m(){swal({title:"Thành công!",text:"Đăng tin thành công!",type:"success",confirmButtonColor:"#64B9A1",confirmButtonText:"Ok",closeOnConfirm:!0},function(){e.go("start.post-manager")})}var h=this;h.files=[],h.listCates=[],h.category="",h.imagePost="",h.shortDesc="",h.Title="",h.IdPoster=i.id,g(),l(p()),h.createPost=d,n.fileReaderSupported=null!=window.FileReader,n.photoChanged=function(t){if(null!=t){var e=t[0];n.fileReaderSupported&&e.type.indexOf("image")>-1&&l(function(){var t=new FileReader;t.readAsDataURL(e),t.onload=function(t){l(function(){h.Avatar=t.target.result})}})}}}angular.module("app").controller("PostTinController",t).directive("fileModel",["$parse","accountService",function(t,e){return{restrict:"A",link:function(t,n,r){n.bind("change",function(){t.$apply(function(){var t={file:[],success:!1,
progress:0};if(r.multiple)for(var a=0;a<n[0].files.length;a++)t={file:n[0].files[a],success:!1,progress:0},e.pushImage(t);else t={file:n[0].files[0],success:!1,progress:0},e.pushImage(t)})})}}}]),t.$inject=["$http","$state","$scope","userService","advertisementService","accountService","$localStorage","postService","requestService","CONSTANT","$timeout","categoryService"]}(),function(){function t(t){t.state("start.post-tin",{url:"/post-tin",templateUrl:"javascripts/controller/post-tin/post-tin.html",controller:"PostTinController",controllerAs:"vm"})}angular.module("app").config(t),t.$inject=["$stateProvider"]}(),function(){function t(t,e,n,r,a,o,i,u,c,s){function l(){CKEDITOR.replace("DescEditor",{language:"vi"})}function f(){p(),d()}function p(){function t(t){if(200===t.status){h.post=t.data,h.Title=h.post.title;var e=$("<div/>").html(h.post.description).text();CKEDITOR.instances.DescEditor.setData(e),h.Avatar=h.post.image,h.category=h.post.cateId,h.shortDesc=h.post.shortDesc}}function e(t){}r.getPostById(s.Id).then(t,e)}function g(t){console.log(t)}function d(){function t(t){200===t.status&&(h.listCates=t.data,$("#id_label_single").select2())}function e(t){}u.GetCategories().then(t,e)}function m(){function t(t){200===t.status&&swal({title:"Thành công!",text:"Cập nhật tin thành công!",type:"success",confirmButtonColor:"#64B9A1",confirmButtonText:"Ok",closeOnConfirm:!0},function(){e.go("start.post-manager")})}function n(t){}var o=CKEDITOR.instances.DescEditor.getData(),i={IdPost:s.Id,Title:h.Title,Description:$("<div/>").text(o).html(),IdPoster:h.IdPoster,IdCate:h.category,shortDesc:h.shortDesc};h.files=a.getImages();var u=new FormData;void 0!==h.files[0]?(u.append("objUpdatePostModel",JSON.stringify(i)),u.append("imagePost",h.files[0].file)):u.append("objUpdatePostModel",JSON.stringify(i)),r.updatePost(u).then(t,n)}var h=this;h.category="",h.post={},h.listCates=[],h.files=[],h.Avatar="",h.IdPoster=i.id,h.Title="",h.shortDesc="",h.chooseCate=g,h.updatePost=m,c(l()),f(),n.fileReaderSupported=null!=window.FileReader,n.photoChanged=function(t){if(null!=t){var e=t[0];n.fileReaderSupported&&e.type.indexOf("image")>-1&&c(function(){var t=new FileReader;t.readAsDataURL(e),t.onload=function(t){c(function(){h.Avatar=t.target.result})}})}}}angular.module("app").controller("UpdatePostController",t),t.$inject=["$http","$state","$scope","postService","accountService","fileService","$localStorage","categoryService","$timeout","$stateParams"]}(),function(){function t(t){t.state("start.update-post",{url:"/update-post/:Id",templateUrl:"javascripts/controller/update-post/update-post.html",controller:"UpdatePostController",controllerAs:"vm"})}angular.module("app").config(t),t.$inject=["$stateProvider"]}(),function(){function t(t,e,n,r,a,o,i){function u(){function t(t){200===t.status&&angular.forEach(t.data,function(t){t.value=!1,s.listEmail.push(t)})}function e(t){}a.getAllEmailsRegister().then(t,e)}function c(){CKEDITOR.replace("DescEditor",{language:"vi"})}var s=this;s.filter="",s.listEmail=[],s.selectedall=!1,u(),s.selectAll=function(){angular.forEach(s.listEmail,function(t){t.value=s.selectedall})},e.$watch("vm.listEmail",function(){var t=!0;angular.forEach(s.listEmail,function(e){t&&0==e.value&&(t=!1)}),t?s.selectedall=!0:s.selectedall=!1},!0),s.openPopupMail=function(){var t=!0;angular.forEach(s.listEmail,function(e){t&&1==e.value&&(t=!1)}),t?swal("Oops!","Không có email nào được chọn!","error"):$("#popupsendmail").modal("show")},i(c()),s.sendMail=function(){function t(t){200===t.status?swal("Thành công!","Gửi mail thành công!","success"):swal("Oops!","Có lỗi trong quá trình gửi mail!","error")}function e(t){swal("Oops!","Có lỗi trong quá trình gửi mail!","error")}$("#popupsendmail").modal("hide");var n=CKEDITOR.instances.DescEditor.getData(),r=[];angular.forEach(s.listEmail,function(t){1==t.value&&r.push(t.Email)});var o={content:n,emails:r};a.sendMail(o).then(t,e)}}t.$inject=["$state","$scope","advertisementService","$localStorage","postService","categoryService","$timeout"],angular.module("app").controller("ListMailController",t),t.$injector=["$state","$scope","advertisementService","$localStorage","postService","categoryService","$timeout"]}(),function(){function t(t){t.state("start.danh-sach-mail",{url:"/danh-sach-mail",templateUrl:"javascripts/controller/danh-sach-mail/danh-sach-mail.html",authenticate:!0,controller:"ListMailController",controllerAs:"vm"})}angular.module("app").config(t),t.$inject=["$stateProvider"]}(),function(){function t(t,e,n,r,a,o,i,u,c){function s(){var t={username:f.username,password:f.password,grant_type:"password"};e.getToken(t).then(function(t){200===t.status?(n.token=t.data,console.log(t),l(),r.go("start")):400===t.status&&(f.message=t.data.error_description,f.warning={color:"red"})})}function l(){function t(t){200===t.status&&(null===t.data.FirstName||null===t.data.LastName?n.userFullName=t.data.UserName:n.userFullName=t.data.LastName+" "+t.data.FirstName,f.role=t.data.Roles[0],f.userId=t.data.Id,f.FullName=n.userFullName,n.FirstName=t.data.FirstName,n.LastName=t.data.LastName,n.PhoneNumber=t.data.PhoneNumber,n.Email=t.data.Email,n.id=t.data.Id,n.UserName=t.data.UserName,n.Address=t.data.Address,null===t.data.Avatar?n.avatar="style/icon/logo.png":n.avatar=u.BASE_URL+t.data.Avatar.substr(1))}function e(t){console.log("get role fail: "+t)}c.getProfile().then(t,e)}var f=this;f.username="",f.password="",f.warning={},f.login=s}angular.module("app").controller("loginPageController",t),t.$inject=["$location","authenticationService","$localStorage","$state","$scope","$window","$timeout","CONSTANT","accountService"]}(),function(){function t(t){t.state("login",{url:"/login",templateUrl:"javascripts/controller/login-page/login-page.html",authenticate:!1,controller:"loginPageController",controllerAs:"vm",resolve:{checkAutho:["authenticationService",function(t){return t.checkUnAuthentication()}]}})}angular.module("app").config(t),t.$inject=["$stateProvider"]}(),function(){function t(t,e,n,r,a,o,i,u,c,s,l,f,p,g,d,m,h){var v=this;null!==i.token&&void 0!==i.token||o.go("login"),v.logout=function(){i.$reset(),o.go("login")}}angular.module("app").controller("CoreController",t),t.$inject=["$http","$scope","authenticationService","accountService","categoryService","$state","$localStorage","notificationService","$timeout","$interval","$window","itemService","CONSTANT","messageCustomerService","$location","statisticService","adminService"]}(),function(){function t(t,e,n){t.interceptors.push("httpInterceptor"),e.otherwise("/start"),n.state("start",{cache:!1,url:"/start",templateUrl:"javascripts/controller/core/start.html",authenticate:!0,controller:"CoreController as vm",resolve:{checkAuth:["authenticationService",function(t){return t.checkAuthentication()}]}})}function e(t,e,n,r){return{request:function(t){return t.url.indexOf(".html")===-1&&t.url.indexOf("http")===-1&&(t.url=r.BASE_URL+t.url),n.token&&(t.headers.authorization=n.token.token_type+" "+n.token.access_token),t},response:function(t){return t},responseError:function(r){return 401===r.status||403===r.status||419===r.status?(delete n.token,delete n.role,e.path("/login"),t.reject(r)):t.reject(r)}}}angular.module("app").config(t).factory("httpInterceptor",e),t.$inject=["$httpProvider","$urlRouterProvider","$stateProvider"],e.$inject=["$q","$location","$localStorage","CONSTANT"]}(),function(){angular.module("app").constant("CONSTANT",{BASE_URL:"https://dautuquestra.azurewebsites.net",VERSION:"1.0"})}(),function(){"use strict";function t(t){function e(t){return new Date(t.getFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds())}function n(t){var n=new Date,r=e(t),a=864e5,o=r.getTime()-n.getTime(),i=o/a,u=Math.floor(i),c=24*(i-u),s=Math.floor(c),l=60*(c-s),f=Math.floor(60*(c-s)),p=Math.floor(60*(l-f)),g=[u,s,f,p];return g}function r(t,e){for(var n=[],r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n}var a={countdown:n,chunk:r};return a}angular.module("app").factory("utilService",t),t.$inject=["$http"]}(),function(){"use strict";function t(t){function e(e){function n(t){return t}function r(t){return t}return t.get("api/Admins/GetStatistical?year="+e).then(n,r)}var n={getStatistic:e};return n}angular.module("app").factory("statisticService",t),t.$inject=["$http"]}(),function(){"use strict";function t(t,e){function n(e){function n(t){return t}function r(t){return console.log(t),t}return t.post("/api/PostNews/CreatePostNew",e,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).then(n,r)}function r(n,r,a,o){function i(t){return angular.forEach(t.data.Data,function(t){t.image=e.BASE_URL+t.image.substr(1)}),t}function u(t){return t}return t.get("/api/PostNews/getListPosts?cateId="+n+"&sort="+r+"&page="+a+"&amount="+o).then(i,u)}function a(n){function r(t){return t.data.image=e.BASE_URL+t.data.image.substr(1),t}function a(t){return t}return t.get("/api/PostNews/getPostById?postId="+n).then(r,a)}function o(e){function n(t){return t}function r(t){return console.log(t),t}return t.put("/api/PostNews/UpdatePostNew",e,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).then(n,r)}function i(){function e(t){return t}function n(t){return t}return t.get("/api/PostNews/getAllEmailsRegister").then(e,n)}function u(e){function n(t){return t}function r(t){return t}return t.post("/api/PostNews/sendMail",e).then(n,r)}function c(e){function n(t){return t}function r(t){return t}return t["delete"]("/api/PostNews/deletePost?postId="+e).then(n,r)}var s={createPost:n,getAllPosts:r,getPostById:a,updatePost:o,getAllEmailsRegister:i,sendMail:u,deletePost:c};return s}angular.module("app").factory("postService",t),t.$inject=["$http","CONSTANT"]}(),function(){"use strict";function t(t,e){function n(e,n,r){function a(t){return t}function o(t){return t}return t.get("api/Admins/getIncrement?sort="+e+"&page="+n+"&amount="+r).then(a,o)}function r(e){function n(t){return t}function r(t){return t}return t.put("api/Admins/UpdateIncrement",e).then(n,r)}function a(){function n(t){return angular.forEach(t.data.listBidItems,function(t){angular.forEach(t.Images,function(t){t.Path=e.BASE_URL+t.Path.substr(1)})}),angular.forEach(t.data.listBuyNowItems,function(t){angular.forEach(t.Images,function(t){t.Path=e.BASE_URL+t.Path.substr(1)})}),angular.forEach(t.data.listNewItems,function(t){angular.forEach(t.Images,function(t){t.Path=e.BASE_URL+t.Path.substr(1)})}),angular.forEach(t.data.listCateItems,function(t){angular.forEach(t.listItems,function(t){angular.forEach(t.Images,function(t){t.Path=e.BASE_URL+t.Path.substr(1)})})}),t}function r(t){return t}return t.get("api/ItemSells/getHomeItems").then(n,r)}var o={getAllIncrement:n,updateIncrement:r,getHomeItems:a};return o}angular.module("app").factory("adminService",t),t.$inject=["$http","CONSTANT"]}();